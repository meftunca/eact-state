{"version":3,"file":"index.es.js","sources":["../src/Context.js","../src/Consumer.js","../src/Provider.js","../src/Decorator.js"],"sourcesContent":["import { createContext } from \"react\";\nexport const { Consumer, Provider } = createContext();\n","import React from \"react\";\nimport { Consumer } from \"./Context\";\n//\nexport default storeList => Component => props => (\n  <Consumer>{state => <Component {...props} {...inject(storeList, state)} />}</Consumer>\n);\nconst inject = (storeGroup, storeList) => {\n  let newStoreList = {};\n  if (!Array.isArray(storeGroup) && typeof storeGroup === \"object\") {\n    throw new Error(\"Just Using Array\");\n  }\n  if (Array.isArray(storeGroup)) {\n    for (let storeName in storeGroup) {\n      newStoreList[storeName] = storeList[storeName];\n    }\n  } else {\n    newStoreList[storeGroup] = storeList[storeGroup];\n  }\n\n  return newStoreList;\n};\n","import React, { Component } from \"react\";\nimport { Provider } from \"./Context\";\n\nclass GStateProvider extends Component {\n  constructor(props) {\n    super(props);\n    let { children, ...rest } = this.props;\n    this.state = getStore(rest);\n  }\n  componentDidMount() {\n    let { children, ...rest } = this.props;\n    const store = getStore(rest);\n    getTrigger(store, this.setGState);\n  }\n  setGState = () => {\n    let { children, ...rest } = this.props;\n    const store = getStore(rest);\n    this.setState({ ...store });\n  };\n  render() {\n    return <Provider value={this.state}>{this.props.children}</Provider>;\n  }\n}\n\nconst getStore = newProps => createObject(Object.entries(newProps));\nconst createObject = array => {\n  let obj = {};\n  array.map(i => (obj[i[0]] = i[1]));\n  return obj;\n};\nconst getTrigger = (store, trigger) => {\n  Object.values(store).map(i =>\n    Object.defineProperty(i, \"setState\", {\n      value: trigger,\n      enumerable: false,\n      writable: false,\n      configurable: false\n    })\n  );\n};\nexport default GStateProvider;\n","const action = (target, key, descriptor) => {\n  let fn = descriptor.value;\n\n  return {\n    enumerable: false,\n    configurable: false,\n    value: function() {\n      fn(...arguments);\n      this.setState();\n    }\n  };\n};\nconst actionWithPerformance = (target, key, descriptor) => {\n  let fn = descriptor.value;\n\n  return {\n    enumerable: false,\n    configurable: false,\n    value: function() {\n      let t0 = performance.now();\n      fn(...arguments);\n      this.setState();\n      let t1 = performance.now();\n      console.log(\"Call to doSomething took \" + (t1 - t0).toFixed(3) + \" milliseconds.\");\n    }\n  };\n};\n\nconst readOnly = (target, name, descriptor) => {\n  descriptor.writable = false;\n  return descriptor;\n};\nconst observable = (target, name, descriptor) => {\n  let fn = descriptor.value;\n  // descriptor.writable = true;\n  descriptor = {};\n  descriptor.configurable = true;\n  descriptor.enumerable = true;\n  descriptor.get = function() {\n    return fn;\n  };\n  descriptor.set = function(newValue, ...arg) {\n    fn = newValue;\n    this.setState();\n  };\n\n  return descriptor;\n};\n\nconst log = (target, name, descriptor) => {\n  const original = descriptor.value;\n  if (typeof original === \"function\") {\n    descriptor.value = function(...args) {\n      try {\n        const result = original.apply(this, args);\n        console.log(`Result: ${result}`);\n        return result;\n      } catch (e) {\n        console.log(`Error: ${e}`);\n        throw e;\n      }\n    };\n  }\n  return descriptor;\n};\nconst decoratorList = {\n  action,\n  actionWithPerformance,\n  readOnly,\n  observable,\n  log\n};\nexport default (thing, decorators) => {\n  let obj = typeof thing === \"function\" ? new thing() : thing;\n  for (let prop in decorators) {\n    let propertyDecorators = decoratorList[decorators[prop]];\n    if (!Array.isArray(propertyDecorators)) {\n      propertyDecorators = [propertyDecorators];\n    }\n    const descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n    const newDescriptor = propertyDecorators.reduce(\n      (accDescriptor, decorator) => decorator(obj[prop], prop, accDescriptor),\n      descriptor\n    );\n    if (newDescriptor) Object.defineProperty(obj, prop, newDescriptor);\n  }\n  return obj;\n};\n"],"names":["Consumer","Provider","createContext","storeList","Component","props","React","state","inject","storeGroup","newStoreList","Array","isArray","Error","storeName","GStateProvider","constructor","children","rest","store","getStore","setState","componentDidMount","getTrigger","setGState","render","value","newProps","createObject","Object","entries","array","obj","map","i","trigger","values","defineProperty","enumerable","writable","configurable","action","target","key","descriptor","fn","arguments","actionWithPerformance","t0","performance","now","t1","console","log","toFixed","readOnly","name","observable","get","set","newValue","arg","original","args","result","apply","e","decoratorList","thing","decorators","prop","propertyDecorators","getOwnPropertyDescriptor","newDescriptor","reduce","accDescriptor","decorator"],"mappings":"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"}